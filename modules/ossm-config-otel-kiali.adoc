// Module included in the following assemblies:
//
// * service-mesh-docs-main/kiali/ossm-kiali-assembly.adoc

:_mod-docs-content-type: PROCEDURE
[id="ossm-config-otel-kiali_{context}"]
= Configuring {DTProductName} with {KialiProduct}

After {KialiProduct} is integrated with {DTProductName}, you can view distributed traces in the Kiali console. Viewing these traces can provide insight into the communication between services within the service mesh, helping you understand how requests are flowing through your system and where potential issues might be.

.Prerequisites

* You installed {SMProductName}.

* You configured {DTShortName} with {SMProductName}.

.Procedure

. Update the `Kiali` resource `spec` configuration for tracing:
+
.Example `Kiali` resource `spec` configuration for tracing
[source,yaml]
----
spec:
  external_services:
    grafana:
      enabled: true # <1>
      in_cluster_url: http://grafana-istio-system.apps-crc.testing/ # <2>
      url: http://grafana-istio-system.apps-crc.testing/
    tracing:
      enabled: true
      provider: tempo
      use_grpc: false
      in_cluster_url: http://tempo-sample-query-frontend.tempo:3200
      url: https://tempo-sample-query-frontend-tempo.apps-crc.testing
      tempo_config: # <3>
        org_id: "1"
        datasource_uid: a8d2ef1c-d31c-4de5-a90b-e7bc5252cd00
----
<1> Required so that you can see the *View in Tracing* link from the *Traces* tab.
<2> If the Tempo resource is deployed with multiple tenants, then the `in_cluster_url` config must point to the gateway with the tenant name as part of the URL. For example: http://tempo-resource-gateway.tempo:8080/api/traces/v1/{tenantName}/tempo
<3> Required so that you can see the *View in Tracing*  link from the *Traces* tab and redirect to the proper Tempo `datasource`.

. Save the updated `spec` in 'kiali_cr.yaml`.

. Run the following command to apply the configuration:
+
[source, terminal]
----
oc patch -n istio-system kiali kiali --type merge -p "$(cat kiali_cr.yaml)"
----
+
Output:
+
[source, terminal]
----
 kiali.kiali.io/kiali patched
----

.Verification

. Run the following command to get the Kiali route:
+
[source, terminal]
----
oc get route kiali ns istio-system
----

. Navigate to the Kiali UI.

. Navigate to *Workload* â†’ *Traces* tab to see traces in the Kiali UI.

//Note for later: there are things in here, like Kiali UI, that may need attributes. Attributes will be updated prior to GA.
//Note that "Kiali UI" is not the same as "Kiali Operator provided by Red Hat", and there currently is only 1 attribute related to Kiali, and it is for "Kiali Operator provided by Red Hat".